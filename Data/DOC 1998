Title : Module:Main/doc
Text : {{high-risk|228000+}}
{{Module rating|protected}}

This module produces a link to a main article or articles. It implements the {{tl|main}} template. Normally, it produces a link like "Main article: A". If used in the [[Help:Category|category]] namespace, it produces a link like "The main article for this category is A". It is possible to specify multiple articles, and in this case plural wording is used automatically. If the first link is not an article, the module uses the wording "Main page" instead of "Main article".

== Usage from wikitext ==
This module cannot be accessed directly from #invoke. Instead, it can only be used through the {{tl|main}} template. Please see the template page for documentation.

== Usage from other Lua modules ==
Load the module:

<source lang="lua">
local mMain = require('Module:Main')
</source>

You can then use the _main function like this:

<source lang="lua">
mMain._main(args, options)
</source>

The <var>args</var> parameter following <var>options</var> are a list of page link strings; if they use custom display values, each string should be preprocessed into a single piped string (e.g. <code><nowiki>page|display value</nowiki></code>). Category or file links are automatically escaped using the [[Help:Colon trick|colon trick]]. If a link includes a section name, and no display value is set, links are automatically formatted as ''page ยง section'', rather than the MediaWiki default of ''page#section''.

The optional <var>options</var> table can be used to configure the function's output. At present, the only option available is "selfref", which is used when the output is a self-reference to Wikipedia. to set this option, use {{code|1={selfref = true}|2=lua}}. (See the {{tl|selfref}} template for more details on self-references.)

=== Example 1 ===
<source lang="lua">
mMain._main({'A'})
</source>

Produces:

<code><nowiki><div role="note" class="hatnote navigation-not-searchable">Main article: [[A]]</div></nowiki></code>

Displays as:

{{main|A}}

=== Example 2 ===
<source lang="lua">
mMain._main({'Wikipedia:Categorization', 'Help:Category', 'Category:Wikipedia categories'})
</source>

Produces:

<code><nowiki><div role="note" class="hatnote navigation-not-searchable">Main pages: [[Wikipedia:Categorization]], [[Help:Category]] and [[:Category:Wikipedia categories]]</div></nowiki></code>

Displays as:

{{main|Wikipedia:Categorization|Help:Category|Category:Wikipedia categories}}

=== Example 3 ===
<source lang="lua">
mMain._main({'A|the letter "A"', 'B|the letter "B"', 'C|the letter "C"'})
</source>

Produces:

<code><nowiki><div role="note" class="hatnote navigation-not-searchable">Main articles: [[A|the letter "A"]], [[B|the letter "B"]] and [[C|the letter "C"]]</div></nowiki></code>

Displays as:

{{main|A|B|C|l1=the letter "A"|l2=the letter "B"|l3=the letter "C"}}

=== Example 4 ===
<source lang="lua">
mMain._main({'Wikipedia:Verifiability#Burden'}, {selfref = true})
</source>

Produces:

<code><nowiki><div role="note" class="hatnote navigation-not-searchable selfref">Main article: [[Wikipedia:Verifiability#Burden|Wikipedia:Verifiability ยง Burden]]</div></nowiki></code>

Displays as:

{{main|Wikipedia:Verifiability#Burden|selfref=true}}

=== Example 5 (if used in the category namespace) ===
<source lang="lua">
mMain._main({'A'})
</source>

Produces:

<code><nowiki><div role="note" class="hatnote navigation-not-searchable">The main article for this [[Wikipedia:Categorization|category]] is [[A]]</div></nowiki></code>

Displays as:

<div role="note" class="hatnote navigation-not-searchable">The main article for this [[Wikipedia:Categorization|category]] is [[A]]</div>

== Technical details ==
This module uses [[Module:Hatnote]] to format the hatnote text, [[Module:Hatnote list]] to process the list of links, and [[Module:Arguments]] to fetch the arguments from wikitext.

<includeonly>{{#ifeq:{{SUBPAGENAME}}|sandbox||
<!-- Categories go here and interwikis go in Wikidata. -->
[[Category:Hatnote modules]]
}}</includeonly>
